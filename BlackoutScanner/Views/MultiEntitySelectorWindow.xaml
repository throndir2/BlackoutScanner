<Window x:Class="BlackoutScanner.Views.MultiEntitySelectorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Multi-Entity Preview"
        ResizeMode="NoResize"
        Topmost="True"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ShowInTaskbar="False">

    <Window.Resources>
        <!-- Override theme styles to ensure transparency -->
        <Style TargetType="Grid">
            <Setter Property="Background"
                    Value="Transparent"/>
        </Style>
        <Style TargetType="Border">
            <Setter Property="Background"
                    Value="Transparent"/>
        </Style>
        <Style TargetType="StackPanel">
            <Setter Property="Background"
                    Value="Transparent"/>
        </Style>
    </Window.Resources>

    <Grid>
        <!-- Main canvas for drawing the preview -->
        <Canvas x:Name="previewCanvas"
                Background="#01000000"
                ClipToBounds="False"/>

        <!-- Instruction panel at the top -->
        <Border Background="#CC000000"
                VerticalAlignment="Top"
                HorizontalAlignment="Center"
                CornerRadius="5"
                Margin="0,20,0,0"
                Padding="15,10">
            <Border.Style>
                <Style TargetType="Border">
                    <Setter Property="Background"
                            Value="#CC000000"/>
                </Style>
            </Border.Style>
            <StackPanel>
                <TextBlock x:Name="instructionText"
                           Foreground="White"
                           FontSize="14"
                           FontWeight="Bold"
                           Text="Drag UP/DOWN to adjust row spacing. Press ENTER to save or ESC to cancel."/>
                <TextBlock x:Name="statusText"
                           Foreground="Cyan"
                           FontSize="12"
                           Margin="0,5,0,0"
                           Text="Row Height Offset: 40 pixels"/>
            </StackPanel>
        </Border>

        <!-- Info panel at the bottom -->
        <Border Background="#CC000000"
                VerticalAlignment="Bottom"
                HorizontalAlignment="Center"
                CornerRadius="5"
                Margin="0,0,0,20"
                Padding="15,10">
            <Border.Style>
                <Style TargetType="Border">
                    <Setter Property="Background"
                            Value="#CC000000"/>
                </Style>
            </Border.Style>
            <TextBlock x:Name="summaryText"
                       Foreground="White"
                       FontSize="12"
                       Text="Total fields to capture: 0"/>
        </Border>

        <!-- Control buttons at bottom right -->
        <StackPanel Orientation="Horizontal"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Bottom"
                    Margin="0,0,0,50">
            <Button Content="✓ Confirm (Enter)"
                    Click="Confirm_Click"
                    Margin="5"
                    Padding="15,10"
                    Background="#FF4CAF50"
                    Foreground="White"
                    FontSize="14"
                    FontWeight="Bold"
                    Cursor="Hand">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="5"
                                Padding="{TemplateBinding Padding}">
                            <Border.Effect>
                                <DropShadowEffect ShadowDepth="2"
                                                  Color="Black"
                                                  Opacity="0.5"/>
                            </Border.Effect>
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Button.Template>
            </Button>
            <Button Content="✗ Cancel (Esc)"
                    Click="Cancel_Click"
                    Margin="5"
                    Padding="15,10"
                    Background="#FFF44336"
                    Foreground="White"
                    FontSize="14"
                    FontWeight="Bold"
                    Cursor="Hand">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="5"
                                Padding="{TemplateBinding Padding}">
                            <Border.Effect>
                                <DropShadowEffect ShadowDepth="2"
                                                  Color="Black"
                                                  Opacity="0.5"/>
                            </Border.Effect>
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Button.Template>
            </Button>
        </StackPanel>
    </Grid>
</Window>